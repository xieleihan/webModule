import{r as t,c as a,a as e,w as s,F as i,i as o,o as l,b as n,d,t as r,e as c,n as u,S as h,I as m,f as p,g,h as f}from"./index-CkNYVxWQ.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=w({data:()=>({indicatorDots:!0,autoplay:!0,interval:3e3,duration:1500,images:[],nowTime:"",latitude:"22.27",longitude:"114.16",city:"香港",temp:"NaN",iconnum:""}),mounted(){this.generateRandomImages(),this.getNowTime(),setInterval(this.getNowTime,1e3)},methods:{generateRandomImages(){for(let t=0;t<6;t++){const t=Math.floor(100*Math.random());this.images.push(`https://picsum.photos/3840/2160?${t}`)}},getNowTime(){const t=new Date;this.nowTime=t.toLocaleString()},getWeatherAndCity(){const a="7d2051100a0a467386d0cafa66e3ecb9";t({url:`https://geoapi.qweather.com/v2/city/lookup?key=${a}&location=${this.longitude},${this.latitude}`,method:"GET",dataType:"json",success:t=>{t.data&&t.data.location&&t.data.location.length>0&&(this.city=t.data.location[0].adm1)},fail:t=>{console.error("请求城市信息失败：",t)}}),t({url:`https://devapi.qweather.com/v7/weather/now?key=${a}&location=${this.longitude},${this.latitude}`,method:"GET",dataType:"json",success:t=>{t.data&&t.data.now&&(this.temp=t.data.now.temp,this.iconnum=t.data.now.icon)},fail:t=>{console.error("请求天气信息失败：",t)}})}},beforeDestroy(){this.timer&&clearInterval(this.timer)},created(){t({url:"https://ipapi.co/json/",method:"GET",dataType:"json",success:t=>{this.latitude=t.data.latitude,this.longitude=t.data.longitude,this.getWeatherAndCity()}})}},[["render",function(t,w,y,v,_,T){const $=g,I=o,j=f,N=h,k=m;return l(),a(i,null,[e(I,{class:"uni-margin-wrap"},{default:s((()=>[e(N,{class:"swiper",circular:"","indicator-dots":_.indicatorDots,autoplay:_.autoplay,interval:_.interval,duration:_.duration},{default:s((()=>[(l(!0),a(i,null,n(_.images,((t,a)=>(l(),p(j,{key:a},{default:s((()=>[e(I,{class:"swiper-item"},{default:s((()=>[e($,{src:t,class:"swiper-image"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["indicator-dots","autoplay","interval","duration"])])),_:1}),e(I,null,{default:s((()=>[e(I,{class:"title"},{default:s((()=>[e(I,{class:"time"},{default:s((()=>[d(r(_.nowTime),1)])),_:1}),e(I,{class:"weather"},{default:s((()=>[c("div",{class:"left"},[c("i",{class:u(`qi-${_.iconnum}`)},null,2)]),c("div",{class:"right"},[c("div",{class:"temp"},r(_.temp)+"℃",1),c("div",{class:"city"},r(_.city),1)])])),_:1})])),_:1}),e(k,{class:"searchInput",type:"text",placeholder:"搜索看看吧"})])),_:1})],64)}],["__scopeId","data-v-66aae8d2"]]);export{y as default};
